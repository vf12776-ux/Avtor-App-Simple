<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Автор - Бронирование отелей и хостелов</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    body { font-family: 'Arial', sans-serif; }
    .header { background-color: #1e3a8a; color: white; padding: 1rem; text-align: center; }
    .container { max-width: 800px; margin: 0 auto; padding: 20px; }
    .hotel-card { border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; margin: 10px 0; }
    .btn-primary { background-color: #1e3a8a; color: white; padding: 8px 16px; border-radius: 4px; }
    .btn-primary:hover { background-color: #3b82f6; }
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); }
    .modal-content { background: white; margin: 10% auto; padding: 20px; max-width: 500px; border-radius: 8px; }
    .modal-close { float: right; cursor: pointer; font-size: 1.5rem; }
  </style>
</head>
<body>
  <div class="header">
    <h1 class="text-2xl font-bold">Автор - Бронирование</h1>
  </div>
  <div class="container">
    <h2 class="text-xl font-semibold mb-4">Выберите город</h2>
    <select id="citySelect" onchange="loadHotels()" class="border p-2 rounded w-full mb-4">
      <option value="">Выберите город</option>
      <option value="Москва">Москва</option>
      <option value="Санкт-Петербург">Санкт-Петербург</option>
      <option value="Краснодар">Краснодар</option>
      <option value="Тюмень">Тюмень</option>
      <option value="Екатеринбург">Екатеринбург</option>
    </select>

    <div id="hotels" class="mb-4"></div>

    <h2 class="text-xl font-semibold mb-4">Детали бронирования</h2>
    <div class="flex flex-col gap-4">
      <div>
        <label class="block">Ваше имя:</label>
        <input type="text" id="userName" class="border p-2 rounded w-full" placeholder="Иван Иванов">
      </div>
      <div>
        <label class="block">Ваш email:</label>
        <input type="email" id="userEmail" class="border p-2 rounded w-full" placeholder="ivan@example.com">
      </div>
      <div>
        <label class="block">Дата заезда:</label>
        <input type="date" id="checkIn" class="border p-2 rounded w-full">
      </div>
      <div>
        <label class="block">Дата выезда:</label>
        <input type="date" id="checkOut" class="border p-2 rounded w-full">
      </div>
      <div>
        <label class="block">Время заезда:</label>
        <input type="time" id="checkInTime" class="border p-2 rounded w-full">
      </div>
      <button onclick="book()" class="btn-primary">Забронировать</button>
    </div>
  </div>

  <!-- Модальное окно -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal()">&times;</span>
      <h2 class="text-xl font-semibold mb-4">Подтверждение брони</h2>
      <div id="bookingDetails"></div>
      <button onclick="pay()" class="btn-primary mt-4">Оплатить</button>
      <p class="mt-4">Связаться с отелем: <span id="hotelContact"></span></p>
    </div>
  </div>

  <script>
    const data = {
      cities: [
        {
          name: "Москва",
          hotels: [
            { name: "Автор Столица", type: "hotel", price: 6000, rating: 4.7, contact: "stolica@avtor.ru" },
            { name: "Автор Москва Хостел", type: "hostel", price: 1200, rating: 4.1, contact: "+7 (495) 123-45-67" }
          ]
        },
        {
          name: "Санкт-Петербург",
          hotels: [
            { name: "Автор Невский", type: "hotel", price: 7500, rating: 4.8, contact: "nevsky@avtor.ru" },
            { name: "Автор Питер Хостел", type: "hostel", price: 1100, rating: 4.0, contact: "+7 (812) 234-56-78" }
          ]
        },
        {
          name: "Краснодар",
          hotels: [
            { name: "Автор Юг", type: "hotel", price: 4500, rating: 4.4, contact: "yug@avtor.ru" },
            { name: "Автор Краснодар Хостел", type: "hostel", price: 900, rating: 3.9, contact: "+7 (861) 345-67-89" }
          ]
        },
        {
          name: "Тюмень",
          hotels: [
            { name: "Автор Сибирь", type: "hotel", price: 4000, rating: 4.3, contact: "sibir@avtor.ru" },
            { name: "Автор Тюмень Хостел", type: "hostel", price: 800, rating: 3.8, contact: "+7 (345) 456-78-90" }
          ]
        },
        {
          name: "Екатеринбург",
          hotels: [
            { name: "Автор Урал", type: "hotel", price: 5000, rating: 4.5, contact: "ural@avtor.ru" },
            { name: "Автор Екб Хостел", type: "hostel", price: 1000, rating: 4.0, contact: "+7 (343) 567-89-01" }
          ]
        }
      ]
    };

    let selectedHotel = null;

    function loadHotels() {
      const city = document.getElementById("citySelect").value;
      const hotelsDiv = document.getElementById("hotels");
      hotelsDiv.innerHTML = "";
      const cityData = data.cities.find(c => c.name === city);
      if (cityData) {
        cityData.hotels.forEach(hotel => {
          hotelsDiv.innerHTML += `
            <div class="hotel-card">
              <h3 class="text-lg font-semibold">${hotel.name}</h3>
              <p>Тип: ${hotel.type === "hotel" ? "Отель" : "Хостел"}</p>
              <p>Цена: ${hotel.price} ₽/ночь</p>
              <p>Рейтинг: ${hotel.rating} ★</p>
              <p>Контакты: ${hotel.contact}</p>
              <button onclick="selectHotel('${hotel.name}', '${hotel.contact}')" class="btn-primary mt-2">Выбрать</button>
            </div>`;
        });
      }
    }

    function selectHotel(hotelName, contact) {
      selectedHotel = { name: hotelName, contact: contact };
      alert(`Вы выбрали ${hotelName}`);
    }

    function book() {
      const userName = document.getElementById("userName").value;
      const userEmail = document.getElementById("userEmail").value;
      const checkIn = document.getElementById("checkIn").value;
      const checkOut = document.getElementById("checkOut").value;
      const checkInTime = document.getElementById("checkInTime").value;

      if (selectedHotel && userName && userEmail && checkIn && checkOut && checkInTime) {
        const booking = {
          hotel: selectedHotel.name,
          contact: selectedHotel.contact,
          userName,
          userEmail,
          checkIn,
          checkOut,
          checkInTime
        };
        localStorage.setItem("booking", JSON.stringify(booking));

        // Показать модальное окно
        const modal = document.getElementById("modal");
        const bookingDetails = document.getElementById("bookingDetails");
        const hotelContact = document.getElementById("hotelContact");
        bookingDetails.innerHTML = `
          <p><strong>Отель:</strong> ${booking.hotel}</p>
          <p><strong>Имя:</strong> ${booking.userName}</p>
          <p><strong>Email:</strong> ${booking.userEmail}</p>
          <p><strong>Заезд:</strong> ${booking.checkIn} в ${booking.checkInTime}</p>
          <p><strong>Выезд:</strong> ${booking.checkOut}</p>
        `;
        hotelContact.innerHTML = `<a href="${booking.contact.includes('@') ? 'mailto:' : 'tel:'}${booking.contact}">${booking.contact}</a>`;
        modal.style.display = "block";
      } else {
        alert("Пожалуйста, заполните все поля и выберите отель!");
      }
    }

    function closeModal() {
      document.getElementById("modal").style.display = "none";
    }

    function pay() {
      alert("Оплата успешно имитирована! В будущем здесь будет интеграция с платежной системой.");
      closeModal();
    }

    // Закрытие модального окна при клике вне его
    window.onclick = function(event) {
      const modal = document.getElementById("modal");
      if (event.target === modal) {
        closeModal();
      }
    };
  </script>
</body>
</html>